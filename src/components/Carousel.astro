---
const discs = [
  { image: '/discs/Home.jpg', title: 'Home', link: '/' },
  { image: '/discs/youtube.jpg', title: 'YouTube Channels', link: '/youtube-channels' },
  { image: '/discs/Products.jpg', title: 'Products', link: '/products' },
  { image: '/discs/flying-tips.jpg', title: 'Flying Tips', link: '/flying-tips' },
];
---

<style>
  .carousel-container {
    perspective: 1000px;
    width: 100%;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 70vh;
    position: relative;
  }

  .carousel {
    width: 300px;
    height: 300px;
    position: relative;
    transform-style: preserve-3d;
    animation: spin 20s linear infinite;
  }

  .disc {
    width: 100px;
    height: 100px;
    position: absolute;
    top: 100px;
    left: 100px;
    transform-style: preserve-3d;
    transition: transform 0.5s, z-index 0.5s;
    cursor: pointer;
  }

  .disc img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
    border: 2px solid white;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
  }

  .disc.highlighted {
    transform: translateZ(150px) rotateY(0deg);
    z-index: 10;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.8);
  }

  @keyframes spin {
    from {
      transform: rotateY(0deg);
    }
    to {
      transform: rotateY(360deg);
    }
  }
</style>

<div class="carousel-container">
  <div class="carousel" id="carousel">
    {discs.map((disc, i) => (
      <a
        href={disc.link}
        class="disc"
        style={`transform: rotateY(${i * (360 / discs.length)}deg) translateZ(250px);`}
      >
        <img src={disc.image} alt={disc.title} />
      </a>
    ))}
  </div>
</div>

<script type="module">
  const carousel = document.getElementById('carousel');
  const discs = carousel.querySelectorAll('.disc');
  let currentIndex = 0;

  function highlightDisc(index) {
    discs.forEach((disc, i) => {
      disc.classList.toggle('highlighted', i === index);
    });
  }

  highlightDisc(currentIndex);

  setInterval(() => {
    currentIndex = (currentIndex + 1) % discs.length;
    highlightDisc(currentIndex);
  }, 5000);
</script>
